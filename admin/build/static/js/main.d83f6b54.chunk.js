(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{110:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(11),c=t.n(o),i=t(28),l=t(32);t(96),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=t(111),m=t(152),u=t(153),d=t(84),p=t(154),f=t(151),h=Object(s.a)(function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},appBar:{zIndex:e.zIndex.drawer+1}}});var g=t(47),E=t(156),b=t(160),v=t(159),j=t(157),O=t(158),y=t(83),x=t(155),N=t(25),w=function(e,a){return a?function(a){return r.a.createElement(p.a,Object.assign({},a,{style:Object(N.a)({},a.style,{backgroundColor:e})}))}:function(a){return r.a.createElement(p.a,Object.assign({},a,{style:Object(N.a)({},a.style,{color:e})}))}},k=w("#f44336",!0),C=w("#4caf50",!0),I=w("#ff9800",!0),_=(w("#f44336",!1),w("#4caf50",!1),w("#ff9800",!1),t(21)),S=Object(s.a)(function(e){return{root:{width:"100%",marginTop:e.spacing(10),overflowX:"auto"},table:{minWidth:650}}});var T=t(46),A=t(48),M=t(167),W=t(168),B=t(166),G=t(80),L=t.n(G),D=t(75),F=t(42),R=t(82),z=t(76),J=t(36),P=t(81),U=t(77),H=t(3),X=t(78),$=t.n(X),q=t(161),K=t(162),Q=t(164),V=t(170),Y=t(163),Z=Object(s.a)(function(e){return{success:{backgroundColor:q.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:K.a[700]},message:{display:"flex",alignItems:"center"}}});function ee(e){var a=Z(),t=e.className,n=e.message,o=e.onClose,c=e.variant,i=Object(U.a)(e,["className","message","onClose","variant"]);return r.a.createElement(Y.a,Object.assign({className:Object(H.a)(a[c],t),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:a.message},n),action:[r.a.createElement(Q.a,{key:"close","aria-label":"Close",color:"inherit",onClick:o},r.a.createElement($.a,{className:a.icon}))]},i))}var ae=Object(n.createContext)({showMessage:{},open:!1}),te=function(e){function a(e){var t;return Object(D.a)(this,a),(t=Object(R.a)(this,Object(z.a)(a).call(this,e))).state={open:!1,showMessage:function(e,a,n){-1!==["success","warning","error","info"].indexOf(e)&&a&&t.setState({variant:e,message:a,duration:n||t.state.duration,open:!0})},duration:3e3,message:"",variant:"success"},t.handleClose=t.handleClose.bind(Object(J.a)(t)),t}return Object(P.a)(a,e),Object(F.a)(a,[{key:"handleClose",value:function(e,a){"clickaway"!==a&&this.setState({open:!1})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ae.Provider,{value:this.state},r.a.createElement(V.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.open,autoHideDuration:this.state.duration,onClose:this.handleClose},r.a.createElement(ee,{onClose:this.handleClose,variant:this.state.variant,message:this.state.message})),this.props.children))}}]),a}(r.a.Component);te.contextType=ae;var ne=te,re=Object(s.a)(function(e){return{root:{padding:e.spacing(3,2),marginTop:"15px"},container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1)},dense:{marginTop:e.spacing(2)},menu:{width:200},leftIcon:{marginRight:e.spacing(1)},margin:{margin:e.spacing(1)},content:{flexGrow:1,padding:e.spacing(10)}}});var oe,ce=(oe=function(e){var a=re(),t=Object(n.useState)({students:[{firstName:"",lastName:""}],_id:e.match.params.id,special:!1}),o=Object(g.a)(t,2),c=o[0],s=o[1],m=Object(n.useState)({redirect:!1,roomID:0}),u=Object(g.a)(m,2),f=u[0],h=u[1];Object(n.useEffect)(function(){fetch(_.a.protocol+"://"+_.a.hostname+":"+_.a.port+"/room/"+e.match.params.id,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){if(e.ok)return e.json();throw e}).then(function(e){s(e),h({redirect:!1})}).catch(console.error)},[e.match.params.id]);var E=function(e,a){return function(t){var n=Object(A.a)(c.students);n[a][e]=t.target.value,s(Object(N.a)({},c,{students:n}))}},b=function(e){return function(a){"text"===a.target.type?s(Object(N.a)({},c,Object(T.a)({},e,a.target.value))):s(Object(N.a)({},c,Object(T.a)({},e,a.target.checked)))}},v=function(a){return function(){if(c.students.length>1){var t=Object(A.a)(c.students);t.splice(a,1),s(Object(N.a)({},c,{students:t}))}else e.snackbar.showMessage("error","La salle doit contenir au minimum un \xe9tudiant")}};return f.redirect?r.a.createElement(l.a,{to:"/edit/"+f.roomID}):r.a.createElement("main",{className:a.content},r.a.createElement(x.a,{container:!0,justify:"center"},r.a.createElement(x.a,{item:!0,xs:12,md:10,lg:8},r.a.createElement(y.a,{className:a.root},r.a.createElement(x.a,{container:!0,spacing:4},r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(d.a,{variant:"h5",component:"h3"},"Modification de la salle ",e.match.params._id)),r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(M.a,{id:"outlined-name",label:"Identifiant",className:a.textField,value:c._id,onChange:b("_id"),margin:"normal",variant:"outlined"})),r.a.createElement(x.a,{item:!0,xs:12},c.students.map(function(e,t){return r.a.createElement(x.a,{container:!0,spacing:8,alignItems:"center",key:t},r.a.createElement(x.a,{item:!0,xs:12,md:4},r.a.createElement(M.a,{id:"outlined-name",label:"Nom",className:a.textField,value:e.lastName,onChange:E("lastName",t),margin:"normal",variant:"outlined",fullWidth:!0})),r.a.createElement(x.a,{item:!0,xs:12,md:4},r.a.createElement(M.a,{id:"outlined-name",label:"Pr\xe9nom",className:a.textField,value:e.firstName,onChange:E("firstName",t),margin:"normal",variant:"outlined",fullWidth:!0})),r.a.createElement(x.a,{item:!0,xs:12,md:4},r.a.createElement(k,{variant:"contained",color:"primary",onClick:v(t)},"Supprimer l'\xe9tudiant")))})),r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(p.a,{variant:"contained",color:"primary",className:a.margin,onClick:function(){s(Object(N.a)({},c,{students:c.students.concat({firstName:"",lastName:""})}))}},r.a.createElement(L.a,{className:a.leftIcon}),"Ajouter un \xe9tudiant")),r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(B.a,{control:r.a.createElement(W.a,{color:"primary",checked:c.special,className:a.margin,onChange:b("special")}),label:"Salle sp\xe9ciale"})),r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(C,{variant:"contained",color:"primary",className:a.margin,onClick:function(){var a={_id:e.match.params.id,newId:c._id!==e.match.params.id?c._id:void 0,students:c.students,special:c.special};fetch(_.a.protocol+"://"+_.a.hostname+":"+_.a.port+"/room/",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(e){if(e.ok)return e.json();throw e}).then(function(t){e.snackbar.showMessage("success","Salle mise \xe0 jour avec succ\xe8s"),a.newId?h({redirect:!0,roomID:a.newId}):s(t)}).catch(console.error)}},"Mettre \xe0 jour la salle"),r.a.createElement(I,{component:i.b,to:"/",variant:"contained",color:"primary",className:a.margin},"Annuler")))))))},function(e){return r.a.createElement(ae.Consumer,null,function(a){return r.a.createElement(oe,Object.assign({},e,{snackbar:a}))})});c.a.render(r.a.createElement(ne,null,r.a.createElement(i.a,null,r.a.createElement(function(){var e=h();return r.a.createElement("div",{className:e.root},r.a.createElement(f.a,null),r.a.createElement(m.a,{position:"fixed",className:e.appBar},r.a.createElement(u.a,null,r.a.createElement(d.a,{variant:"h6",className:e.title},"Internet of L\xe9o - Admin"),r.a.createElement(p.a,{component:i.b,to:"/",color:"inherit",className:e.button},"Accueil"))))},null),r.a.createElement(l.b,{path:"/",exact:!0,component:function(){var e=Object(n.useState)({rooms:[]}),a=Object(g.a)(e,2),t=a[0],o=a[1],c=S();return Object(n.useEffect)(function(){fetch(_.a.protocol+"://"+_.a.hostname+":"+_.a.port+"/room",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){if(e.ok)return e.json();throw e}).then(function(e){console.log(e),o({rooms:e})}).catch(console.error)},[]),r.a.createElement(x.a,{container:!0,justify:"center"},r.a.createElement(x.a,{item:!0,xs:12,md:10,lg:8},r.a.createElement(y.a,{className:c.root},r.a.createElement(E.a,{className:c.table},r.a.createElement(j.a,null,r.a.createElement(O.a,null,r.a.createElement(v.a,{align:"right"},"Identifiant"),r.a.createElement(v.a,{align:"right"},"\xc9tudiant(s)"),r.a.createElement(v.a,{align:"right"},"Actions"))),r.a.createElement(b.a,null,t.rooms.map(function(e){return r.a.createElement(O.a,{key:e._id},r.a.createElement(v.a,{align:"right"},e._id),r.a.createElement(v.a,{align:"right"},e.students.map(function(e){return e.lastName.toUpperCase()+" "+e.firstName}).join(",")),r.a.createElement(v.a,{align:"right"},r.a.createElement(p.a,{component:"a",target:"_blank",href:"http://localhost:3000/room/"+e._id,variant:"contained",color:"primary",className:"primary"},"Rejoindre la salle"),r.a.createElement(I,{component:i.b,to:"/edit/"+e._id,variant:"contained",style:{marginLeft:"10px"},color:"primary"},"Modifier"),r.a.createElement(k,{variant:"contained",style:{marginLeft:"10px"},color:"primary"},"Supprimer")))}))))))}}),r.a.createElement(l.b,{path:"/edit/:id",component:ce}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},21:function(e){e.exports={a:{hostname:"192.168.1.3",port:3e3,protocol:"http"}}},91:function(e,a,t){e.exports=t(110)},96:function(e,a,t){}},[[91,1,2]]]);
//# sourceMappingURL=main.d83f6b54.chunk.js.map